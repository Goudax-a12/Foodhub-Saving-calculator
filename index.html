<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foodhub Savings Calculator</title>

<style>
:root {
  --foodhub-red:#E4002B;
  --foodhub-green:#1FA971;
  --bg:#F5F6F8;
}

body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  margin: 0;
  padding: 15px;
}

.container {
  max-width: 900px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
  margin: auto;
}

.header {
  background: var(--foodhub-red);
  color: white;
  padding: 16px;
}

.content {
  padding: 16px;
}

h3 {
  margin-top: 25px;
  border-bottom: 2px solid #eee;
  padding-bottom: 6px;
}

.row {
  display: flex;
  flex-direction: column;
  margin-bottom: 12px;
}

label {
  font-size: 14px;
  margin-bottom: 4px;
}

input {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.result {
  font-weight: bold;
  font-size: 16px;
}

.positive { color: var(--foodhub-green); }
.negative { color: var(--foodhub-red); }

.buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 20px;
}

button {
  background: var(--foodhub-red);
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 6px;
  cursor: pointer;
  flex: 1;
}

/* Clean PDF */
@media print {
  button, .buttons { display: none; }
  body { background: white; }
}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <h2>Foodhub vs Flipdish Savings Calculator</h2>
    <p>Merchant Summary</p>
  </div>

  <div class="content">

    <h3>Agent & Store</h3>
    <div class="row">
      <label>Agent Name</label>
      <input id="agent">
    </div>
    <div class="row">
      <label>Store Name</label>
      <input id="store">
    </div>

    <h3>Business Details</h3>
    <div class="row">
      <label>Monthly Orders</label>
      <input id="orders" type="number" value="1000">
    </div>
    <div class="row">
      <label>Average Order Value (£)</label>
      <input id="aov" type="number" value="20">
    </div>
    <div class="row">
      <label>% Card Orders (0.7 = 70%)</label>
      <input id="cardRate" type="number" step="0.01" value="0.7">
    </div>

    <h3>Flipdish</h3>
    <div class="row">
      <label>Commission %</label>
      <input id="fdComm" type="number" step="0.01" value="0.02">
    </div>
    <div class="row">
      <label>Monthly Fee (£)</label>
      <input id="fdFee" type="number" value="99">
    </div>

    <h3>Foodhub</h3>
    <div class="row">
      <label>Commission %</label>
      <input id="fhComm" type="number" step="0.01" value="0">
    </div>
    <div class="row">
      <label>Monthly Fee (£)</label>
      <input id="fhFee" type="number" value="0">
    </div>
    <div class="row">
      <label>Service Charge (£ / order paid to shop)</label>
      <input id="fhService" type="number" step="0.01" value="0.5">
    </div>
    <div class="row">
      <label>Card Fee (£ / card order)</label>
      <input id="fhCardFee" type="number" step="0.01" value="0.2">
    </div>

    <h3>Results</h3>
    <div class="row">
      <label>Flipdish Monthly Cost (£)</label>
      <div id="fdCost" class="result"></div>
    </div>
    <div class="row">
      <label>Foodhub Monthly Cost (£)</label>
      <div id="fhCost" class="result"></div>
    </div>
    <div class="row">
      <label>Monthly Savings (£)</label>
      <div id="monthly" class="result"></div>
    </div>
    <div class="row">
      <label>Annual Savings (£)</label>
      <div id="annual" class="result"></div>
    </div>

    <div class="buttons">
      <button onclick="save()">Save to Sheet</button>
      <button onclick="window.print()">Download PDF</button>
    </div>

  </div>
</div>

<script>
const GOOGLE_SHEET_WEBHOOK = "PASTE_YOUR_WEBHOOK_URL_HERE";

function calc(){
  const o = +orders.value;
  const a = +aov.value;
  const c = +cardRate.value;

  const turnover = o * a;
  const cardOrders = o * c;

  const flipdishCost =
    (turnover * +fdComm.value) +
    (+fdFee.value);

  const foodhubCost =
    (turnover * +fhComm.value) +
    (+fhFee.value) +
    (cardOrders * +fhCardFee.value) -
    (o * +fhService.value);

  const savings = flipdishCost - foodhubCost;

  fdCost.innerText = flipdishCost.toFixed(2);
  fhCost.innerText = foodhubCost.toFixed(2);
  monthly.innerText = savings.toFixed(2);
  annual.innerText = (savings * 12).toFixed(2);

  monthly.className = "result " + (savings >= 0 ? "positive" : "negative");
}

document.querySelectorAll("input").forEach(el =>
  el.addEventListener("input", calc)
);
calc();

function save(){
  fetch(GOOGLE_SHEET_WEBHOOK,{
    method:"POST",
    body:JSON.stringify({
      agent: agent.value,
      store: store.value,
      orders: orders.value,
      aov: aov.value,
      cardRate: cardRate.value,
      fdCost: fdCost.innerText,
      fhCost: fhCost.innerText,
      monthlySavings: monthly.innerText,
      annualSavings: annual.innerText
    })
  })
  .then(() => alert("Saved to tracking sheet"))
  .catch(() => alert("Error saving data"));
}
</script>

</body>
</html>
